---
title: "bellabeats_capstone_casestudy"
author: "Anthony"
date: "1/30/2022"
output: html_document
---

## Case Study
**Bellabeat** Wellness tracker.
Bellabeat is a high-tech manufacturer of health-focused products for women. The *marketing analytics team* whould like to understand the performance of their product and customer response to product changes and improvement efforts.

### Business task:
We want to discover how consumers use non-Bellabeat smart devices, and how we can improve a device to fit the useabilities and performance of similar products.

### Importing R packages
The R packages contain neccessary functions for executing the analysis
```{r importing packages, message=TRUE, warning=FALSE}
library(tidyverse)
library(lubridate)
library(dplyr)
library(ggplot2)
library(tidyr)
library(readr)
```

### Getting the Datasets
The dataset was sourced and validated according to my report [here](https://github.com/AntonAIG/google_da_capstone/blob/main/reports/bellabeat_report.md)

```{r message=FALSE}
activity <- read_csv("/cloud/project/bellabeat_case_study/dailyActivity_merged.csv")
intensities <- read_csv("/cloud/project/bellabeat_case_study/hourlyIntensities_merged.csv")
calories <- read_csv("/cloud/project/bellabeat_case_study/dailyCalories_merged.csv")
sleep <- read_csv("/cloud/project/bellabeat_case_study/sleepDay_merged.csv")
weight <- read_csv("/cloud/project/bellabeat_case_study/weightLogInfo_merged.csv")
```
A quick view of a dataset:
```{r}
head(weight)
```

### Processing the data

##### Formating
The date columns were processed further and split into date and time columns
```{r}
intensities$ActivityHour = as.POSIXct(intensities$ActivityHour,
                                      format="%m/%d/%Y %H:%M:%S %p",
                                      tz=Sys.timezone())
intensities$time <- format(intensities$ActivityHour,
                           format="%H:%M:%S")
intensities$date <- format(intensities$ActivityHour,
                           format="%m/%d/%y")
#calories date and time formatting
calories$ActivityDay = as.POSIXct(calories$ActivityDay,
                                 format="%m/%d/%Y %I:%M:%S %p",
                                 tz=Sys.timezone())
calories$time <- format(calories$ActivityDay, format = "%H:%M:%S")
calories$date <- format(calories$ActivityDay, format = "%m/%d/%y")
#activities date and time formatting
activity$ActivityDate = as.POSIXct(activity$ActivityDate,
                                   format="%m/%d/%Y",
                                   tz=Sys.timezone())
activity$date <- format(activity$ActivityDate, format = "%m/%d/%y")
#sleep date formatting
sleep$SleepDay = as.POSIXct(sleep$SleepDay,
                            format="%m/%d/%Y %I:%M:%S %p",
                            tz=Sys.timezone())
sleep$date <- format(sleep$SleepDay, format = "%m/%d/%y")

```

##### Summary statistics
```{r}
name <- c("activity","calories","intensities","sleep","weight")
activity1 <- n_distinct(activity$Id)
calories1 <- n_distinct(calories$Id)
intensities1 <- n_distinct(intensities$Id)
sleep1 <- n_distinct(sleep$Id)
weight1 <- n_distinct(weight$Id)
unique_count <- c(activity1, calories1, intensities1, sleep1, weight1)
unique_df <- data.frame(name,unique_count)
```
We can observe from the summary statistics that most of the 33 participants were lightly active

```{r summary_stat}
## additional summary statistics
#activity
activity %>% 
  select(TotalSteps, TotalDistance, SedentaryMinutes, Calories) %>% summary()

# number of active minutes per category
activity %>% 
  select(VeryActiveMinutes, FairlyActiveMinutes, LightlyActiveMinutes) %>% 
  summary()

#summary statistics of calories
calories %>% select(Calories) %>% summary()

#summary statistics of sleep
sleep %>% select(TotalSleepRecords, TotalMinutesAsleep, TotalTimeInBed) %>% 
  summary()

#summary statistics of weight
weight %>% select(WeightKg, BMI) %>% summary()
```

The dataset was futher processed in RStudio. Further summary statistics was carried out here to understand the relationships in the features of our dataset.

* We can observe from the summary statistics that most of the 33 participants were lightly active
* The average sleep per participant was 7 hours.
* The average duration spent in sedentary lifestyle is 991 minutes. It's important for Bellabeats to suggest possible ways of reducing this to their customers.
* With an average number of steps at 7638 per day, this number is lower than the recommended number of 10000 by the WHO. At this number, the customers would have to move about more, either by going for a walk or by jogging.

##### Data merging
```{r}
data_merged <- merge(sleep, activity, by=c('Id', 'date'))
head(data_merged)
```

### Sharing and Visualization
Three relationships were explored:

**Relationship between total daily calories and the total daily steps taken**

```{r}
ggplot(data=activity, aes(x=TotalSteps, y=Calories)) +
  geom_point(color='cyan') + geom_smooth() +
  labs(title="Total Steps vs. Calories")
```

From this figure, we can see that there is a positive correlation between Total steps and Calories. Therefore, the more active we are, the more we burn calories.

**Relationship between the total minutes asleep and the total time in bed**

```{r}
ggplot(data=sleep, aes(x=TotalTimeInBed, y=TotalMinutesAsleep)) +
  geom_point(color='cyan') + labs(title="Total Time in Bed vs. Total Minutes Asleep")
```

This linear relationship shows that more time in bed leads to more sleep.

**Relationship between the total minutes asleep and the total minutes of sedentary living**

```{r}
ggplot(data=data_merged, aes(x=TotalMinutesAsleep, y=SedentaryMinutes)) +
  geom_point(color='darkblue') + geom_smooth() +
  labs(title="Minutes Asleep vs. Sedentary Minutes")
```

Here we can clearly see the negative relationship between Sedentary Minutes and Sleep time.

### Conclusion and recommendations
It is very benefitial to understand trends in every business by collecting unbiased data about the particular products that needs improvement, and customer responses to individual products and features. In addition, we need to also understand how our products affects their daily life and showcase how our device can improve certain aspects of their life.
In the case of Bellabeat, our observation shows that:

* If users want to lose weight, itâ€™s probably a good idea to control daily calorie consumption. Bellabeat can suggest some ideas for low-calorie lunch and dinner.
* Most activity happens between 5 pm and 7 pm - I suppose, that people go to a gym or for a walk after finishing work. Bellabeat can use this time to remind and motivate users to go for a run or walk.
* If users want to improve their sleep, Bellabeat should consider using app notifications to go to bed.

Thanks a lot for going through this analysis.